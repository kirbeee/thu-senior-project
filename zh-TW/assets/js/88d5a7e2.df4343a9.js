"use strict";(self.webpackChunkdoc_server=self.webpackChunkdoc_server||[]).push([[3519],{7632:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>i,metadata:()=>d,toc:()=>c});var r=s(4848),t=s(8453);const i={title:"\u5728 Django \u4e2d\u4f7f\u7528 HTTPS"},o=void 0,d={id:"develop-guied/system-design/HTTPS",title:"\u5728 Django \u4e2d\u4f7f\u7528 HTTPS",description:"\u8b66\u544a\uff1a \u9019\u662f\u7531chatGPT\u751f\u6210\u7684\u5167\u5bb9\uff0c\u9700\u8981\u9032\u884c\u53ef\u884c\u6027\u7684\u8a55\u4f30\u3002",source:"@site/docs/develop-guied/system-design/HTTPS.md",sourceDirName:"develop-guied/system-design",slug:"/develop-guied/system-design/HTTPS",permalink:"/thu-senior-project/zh-TW/docs/develop-guied/system-design/HTTPS",draft:!1,unlisted:!1,editUrl:"https://github.com/kirbeee/thu-senior-project/docs/develop-guied/system-design/HTTPS.md",tags:[],version:"current",frontMatter:{title:"\u5728 Django \u4e2d\u4f7f\u7528 HTTPS"},sidebar:"tutorialSidebar",previous:{title:"\u7cfb\u7d71\u67b6\u69cb\u8a2d\u8a08",permalink:"/thu-senior-project/zh-TW/docs/develop-guied/system-design/"},next:{title:"flowchart",permalink:"/thu-senior-project/zh-TW/docs/develop-guied/system-design/flowchart"}},l={},c=[{value:"1. \u7372\u53d6 SSL \u6191\u8b49",id:"1-\u7372\u53d6-ssl-\u6191\u8b49",level:3},{value:"2. \u914d\u7f6e Web \u4f3a\u670d\u5668",id:"2-\u914d\u7f6e-web-\u4f3a\u670d\u5668",level:3},{value:"\u4f7f\u7528 Nginx \u914d\u7f6e HTTPS",id:"\u4f7f\u7528-nginx-\u914d\u7f6e-https",level:4},{value:"3. \u66f4\u65b0 Django \u8a2d\u5b9a",id:"3-\u66f4\u65b0-django-\u8a2d\u5b9a",level:3},{value:"4. \u6e2c\u8a66 HTTPS",id:"4-\u6e2c\u8a66-https",level:3}];function a(e){const n={a:"a",code:"code",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{class:"alert alert--warning",children:(0,r.jsxs)(n.p,{children:[(0,r.jsx)("strong",{children:"\u8b66\u544a\uff1a"})," \u9019\u662f\u7531chatGPT\u751f\u6210\u7684\u5167\u5bb9\uff0c\u9700\u8981\u9032\u884c\u53ef\u884c\u6027\u7684\u8a55\u4f30\u3002"]})}),"\n",(0,r.jsx)(n.p,{children:"\u5728 Django \u4e2d\u4f7f\u7528 HTTPS \u4e3b\u8981\u6d89\u53ca\u4ee5\u4e0b\u5e7e\u500b\u6b65\u9a5f\uff1a"}),"\n",(0,r.jsx)(n.h3,{id:"1-\u7372\u53d6-ssl-\u6191\u8b49",children:"1. \u7372\u53d6 SSL \u6191\u8b49"}),"\n",(0,r.jsx)(n.p,{children:"\u9996\u5148\uff0c\u4f60\u9700\u8981\u7372\u53d6\u4e00\u500b SSL \u6191\u8b49\u3002\u4f60\u53ef\u4ee5\u9078\u64c7\u4ee5\u4e0b\u5e7e\u7a2e\u65b9\u5f0f\uff1a"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u8cfc\u8cb7 SSL \u6191\u8b49"}),"\uff1a\u53ef\u4ee5\u5f9e\u5404\u5927\u6191\u8b49\u9812\u767c\u6a5f\u69cb\uff08CA\uff09\u8cfc\u8cb7\u3002"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u514d\u8cbb SSL \u6191\u8b49"}),"\uff1a\u4f8b\u5982\u4f7f\u7528 ",(0,r.jsx)(n.a,{href:"https://letsencrypt.org/",children:"Let's Encrypt"}),"\uff0c\u63d0\u4f9b\u514d\u8cbb\u7684 SSL \u6191\u8b49\u3002"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"2-\u914d\u7f6e-web-\u4f3a\u670d\u5668",children:"2. \u914d\u7f6e Web \u4f3a\u670d\u5668"}),"\n",(0,r.jsx)(n.p,{children:"Django \u81ea\u5e36\u7684\u958b\u767c\u4f3a\u670d\u5668\u4e26\u4e0d\u652f\u63f4 HTTPS\uff0c\u56e0\u6b64\u901a\u5e38\u9700\u8981\u4f7f\u7528\u4e00\u500b Web \u4f3a\u670d\u5668\u4f86\u8655\u7406 HTTPS \u8acb\u6c42\u3002\u4ee5\u4e0b\u662f\u4e00\u4e9b\u5e38\u898b\u7684 Web \u4f3a\u670d\u5668\u914d\u7f6e\uff1a"}),"\n",(0,r.jsx)(n.h4,{id:"\u4f7f\u7528-nginx-\u914d\u7f6e-https",children:"\u4f7f\u7528 Nginx \u914d\u7f6e HTTPS"}),"\n",(0,r.jsx)(n.p,{children:"\u5982\u679c\u4f60\u9078\u64c7\u4f7f\u7528 Nginx\uff0c\u53ef\u4ee5\u6309\u4ee5\u4e0b\u6b65\u9a5f\u9032\u884c\u914d\u7f6e\uff1a"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u5b89\u88dd Nginx"}),"\uff1a"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo apt update\nsudo apt install nginx\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u914d\u7f6e Nginx"}),"\uff1a\n\u5728 Nginx \u7684\u914d\u7f6e\u6a94\u4e2d\u6dfb\u52a0 HTTPS \u652f\u63f4\u3002\u901a\u5e38\u4f4d\u65bc ",(0,r.jsx)(n.code,{children:"/etc/nginx/sites-available/default"})," \u6216 ",(0,r.jsx)(n.code,{children:"/etc/nginx/sites-available/your_domain"}),"\u3002"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-nginx",children:"server {\n    listen 80;\n    server_name your_domain.com www.your_domain.com;\n\n    # 301 \u91cd\u5b9a\u5411 HTTP \u5230 HTTPS\n    return 301 https://$host$request_uri;\n}\n\nserver {\n    listen 443 ssl;\n    server_name your_domain.com www.your_domain.com;\n\n    ssl_certificate /path/to/your/fullchain.pem;  # Let's Encrypt \u6191\u8b49\n    ssl_certificate_key /path/to/your/privkey.pem;  # \u6191\u8b49\u79c1\u9470\n\n    location / {\n        proxy_pass http://localhost:8000;  # \u5047\u8a2d Django \u5728 8000 \u57e0\u904b\u884c\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n    }\n}\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u91cd\u555f Nginx"}),"\uff1a"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo systemctl restart nginx\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"3-\u66f4\u65b0-django-\u8a2d\u5b9a",children:"3. \u66f4\u65b0 Django \u8a2d\u5b9a"}),"\n",(0,r.jsxs)(n.p,{children:["\u5728 Django \u7684 ",(0,r.jsx)(n.code,{children:"settings.py"})," \u4e2d\uff0c\u70ba\u4e86\u78ba\u4fdd HTTPS \u7684\u5b89\u5168\u6027\uff0c\u53ef\u4ee5\u9032\u884c\u4ee5\u4e0b\u914d\u7f6e\uff1a"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"# \u4f7f\u7528 HTTPS \u7684\u6642\u5019\uff0cDjango \u6703\u5c07 `X-Forwarded-Proto` \u6a19\u982d\u8a2d\u7f6e\u70ba `https`\nSECURE_PROXY_SSL_HEADER = ('HTTP_X_FORWARDED_PROTO', 'https')\n\n# \u78ba\u4fdd\u4f7f\u7528 HTTPS \u7684\u8acb\u6c42\u4f7f\u7528\u5b89\u5168\u7684 cookies\nSESSION_COOKIE_SECURE = True\nCSRF_COOKIE_SECURE = True\n"})}),"\n",(0,r.jsx)(n.h3,{id:"4-\u6e2c\u8a66-https",children:"4. \u6e2c\u8a66 HTTPS"}),"\n",(0,r.jsx)(n.p,{children:"\u78ba\u4fdd\u4f60\u7684\u670d\u52d9\u5668\u6b63\u5e38\u904b\u884c\uff0c\u7136\u5f8c\u5728\u700f\u89bd\u5668\u4e2d\u8a2a\u554f\u4f60\u7684\u57df\u540d\u4ee5\u78ba\u8a8d HTTPS \u662f\u5426\u6b63\u5e38\u5de5\u4f5c\u3002"}),"\n",(0,r.jsx)(n.p,{children:"\u9019\u6a23\u5c31\u5b8c\u6210\u4e86\u5728 Django \u4e2d\u4f7f\u7528 HTTPS \u7684\u914d\u7f6e\u3002\u5982\u679c\u6709\u4efb\u4f55\u7591\u554f\u6216\u9700\u8981\u9032\u4e00\u6b65\u7684\u5e6b\u52a9\uff0c\u96a8\u6642\u544a\u8a34\u6211\uff01"})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>d});var r=s(6540);const t={},i=r.createContext(t);function o(e){const n=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);